<!-- 動作テスト用 index-->
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- HatenaBlog Config html -->
    <!-- 追加場所：ダッシュボード画面 => 設定 => 詳細設定 => <head>要素にメタデータを追加 -->
    <!-- JSXGraphを使うためのコード -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.1.0/jsxgraph.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.1.0/jsxgraphcore.min.js"></script>
    <!-- MathJaxを使うためのコード -->
    <script>
      window.MathJax = {
        loader: {
          load: ["[tex]/physics", "[custom]/xypic.js", "[tex]/mathtools"],
          paths: {
            custom: "https://cdn.jsdelivr.net/gh/sonoisa/XyJax-v3@3.0.1/build/",
          },
        },
        tex: {
          tags: "ams",
          macros: {
            x: "{\\times}",
            bm: ["{\\boldsymbol{#1}}", 1],
            dd: ["{\\frac{\\partial #1}{\\partial #2}}", 2],
            ZT: ["{\\mathcal{Z}\\left[#1\\right]}", 1],
            IZT: ["{\\mathcal{Z^{-1}}\\left[#1\\right]}", 1],
          },
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
          displayMath: [
            ["$$", "$$"],
            ["\\[", "\\]"],
          ],
          packages: {
            "[+]": ["physics", "xypic", "mathtools", "amsmath"],
            "[-]": ["braket"],
          },
        },
        chtml: {
          displayAlign: "left", // 数式を全て左寄せで出力する設定。
        },
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <!--  full -->
    <script
      type="text/javascript"
      id="MathJax-script"
      defer
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
    ></script>
    <title>lib test html</title>

    <script type="module">
      // markdownライブラリ
      import { marked } from "https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";
      document.addEventListener('DOMContentLoaded', function () {
       // Markdownが含まれる要素を取得
       //        const markdownContent = document.getElementById('markdown').innerText;
       const markdownContent = document.getElementById('markdown').innerHTML;

       // var markdownContent = document.getElementById('markdown').innerText;

        //console.log("log->["+markdownContent+"]");
        // MarkdownをHTMLに変換
        const htmlContent = marked.parse(markdownContent);

        // 変換したHTMLを表示
        //  document.getElementById('markdown-content').innerHTML = htmlContent;
        document.getElementById('markdown').innerHTML = htmlContent;
        //  console.log(htmlContent);
      });
      //document.addEventListener('DOMContentLoaded', function () {
      //    // <body>の全内容を取得
      //    const bodyContent = document.body.innerHTML;
      //    // MarkdownをHTMLに変換
      //    const htmlContent = marked.parse(bodyContent);
      //    // 変換したHTMLを<body>に再設定
      //    document.body.innerHTML = htmlContent;
      //});
  

    // document.addEventListener("DOMContentLoaded", function () {
    //   var figures = document.querySelectorAll("figure");
    //   figures.forEach(function (figure, index) {
    //     var figcaption = figure.querySelector("figcaption");
    //     figcaption.innerHTML = "図 " + (index + 1) + ": " + figcaption.innerHTML;
    //     figure.dataset.figureNumber = index + 1; // 図の番号をデータ属性に保存。
    //   });
    // });
    // // 参照番号を付与:シャドウDOMを使用しないバージョン
    // // 参照番号は図に番号を振るスクリプトで各図に設定されたfigureNumberを読み取り表示
    // //  window.addEventListener("load", function () {
    // window.addEventListener("DOMContentLoaded", function () {
    //   const figrefs = document.querySelectorAll("fig-rf"); //fig-ref要素を全て取得

    //   figrefs.forEach((figrf) => {
    //     var fig = this.document.getElementById(figrf.className);
    //     if (fig != null) {
    //       // classで指定する図のidが存在する場合
    //       var figN = fig.dataset.figureNumber;
    //       figrf.innerHTML = "図 " + figN;
    //     }
    //   });
    // });  
</script>
       <!-- 二重数四則演算グラフ表示 -->
       <!-- "https://cdn.jsdelivr.net/gh/zeta80a/DualNumberGraph/dualnumberJsxGraph.js" -->
       <script src="https://cdn.jsdelivr.net/gh/zeta80a/DualNumberGraph/dualnumberJsxGraph.js?ver=2.0.0"></script>
       <script>
        //  document.addEventListener('DOMContentLoaded', function () {
        //   // main
        //   const dualNumberOp = new DualNumberOperation("Operation");
        //  });
       </script>
  </head>
  <body>
<div id="markdown">
# sec1-test
## sec1 - 1
## sec1 - 2
# sec2
## sec2 - 1
## sec2 - 2
</div>

    <div>
      和をグラフで表示すると<fig-rf class="figOperation"></fig-rf>の通り。
      点$z_1$、および$z_2$を適当に動かすと、その和$z_1+z_2$の値がベクトル和と同様であることが確認できる。

      <figure id="figOperation">
        <select
          id="patternSelect"
          style="width: 100px; margin: 0 auto; height: 30px"
        >
          <option value="sum">z_1+z_2</option>
          <option value="mul">z_1 z_2</option>
          <option value="inv">1/z</option>
          <option value="div">z_1/z_2</option>
          <option value="div_i">b_1ε/b_2ε</option>
        </select>
        <div id="Operation" style="width: 400px; height: 400px"></div>
        $ 1/z $はドラッグしている点の逆元を表示
        <figcaption>和,積,逆元,商</figcaption>
      </figure>
    </div>
上の<fig-rf class="figOperation"></fig-rf>は和、積、逆元、商のグラフ
    <footer></footer>

    <script type="module">
      // markdownライブラリ
     // import { marked } from "https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";
      // 特定のdivに対してパース
      // document.getElementById('markdown').innerHTML = marked.parse(document.getElementById('markdown').innerHTML);
 
     //const { marked } = require('marked');
      //        document.getElementById('content').innerHTML =
      //           marked.parse('# Marked in the browser\n\nRendered by **marked**.');
      //        document.getElementById('content').innerHTML = marked.parse('# Marked in Node.js\n\nRendered by **marked**.');

           
      // body全体に対してパース
      //        document.body.innerHTML = marked.parse(document.body.innerHTML);

      //        console.log("before[" + document.getElementById('markdown').innerText +"]");
      //        console.log("after[" + document.getElementById('markdown-content').innerHTML + "]");

      </script>
  </body>
</html>
